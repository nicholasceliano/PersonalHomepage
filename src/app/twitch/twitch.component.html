<div class="twitch-panel-width">
	<div [hidden]="!isPanelLoaded">
		<div id="twitch-player"></div>
		<div class="m-1" [hidden]="!channelSelected"> 
			<div class="d-flex flex-row">
				<p class="h5 m-0 text-nowrap text-truncate pr-1 w-100" data-toggle="tooltip" title="{{streamTitle}}">{{streamTitle}}
				</p>
				<span class="octicon" octicon="screen-full" color="#b8b5c0" width="18px" (click)="showTwitchFullscreen();" title="Fullscreen"></span>
			</div>
			<small class="text-nowrap text-truncate d-inline">{{streamChannel}} - {{streamGame}}</small>
		</div>
		<div *ngIf="twitchAuthenticated" [hidden]="channelSelected">
			<p class="h5 mb-2 text-center">Select a channel to start watching</p>
		</div>
		<button *ngIf="!twitchAuthenticated" type="button" class="btn btn-success btn-block"
			(click)="authenticate()">Authenticate</button>
		<div *ngIf="twitchAuthenticated">
			<div class="row">
				<div class="col-12">
					<ul id="twitchNav" class="nav nav-tabs">
						<li class="nav-item">
							<a class="nav-link" (click)="clickChannelsTab()"
								[class.active]="!channelSelected || !showChatTab" id="list-twitch-channels-list"
								data-toggle="list" href="#list-twitch-channels" role="tab"
								aria-controls="channels">Channels</a>
						</li>
						<li *ngIf="channelSelected" class="nav-item">
							<a class="nav-link" [class.active]="(channelSelected && showChatTab)"
								id="list-twitch-chat-list" data-toggle="list" href="#list-twitch-chat" role="tab"
								aria-controls="twitch-chat">Chat</a>
						</li>
					</ul>
				</div>
			</div>
			<div class="tab-content" id="nav-tabContent">
				<div class="tab-pane show overflow-auto" [class.active]="!showChatTab" id="list-twitch-channels"
					role="tabpanel" aria-labelledby="list-twitch-channels-list">
					<ul id="twitchChannelList" class="list-group list-group-flush">
						<li class="list-group-item p-0 twitch-dark-purple-bkgrnd" data-toggle="tooltip"
							title="{{followedStream.channelStatus}}" *ngFor="let followedStream of followedStreams"
							(click)="showStream(followedStream)">
							<div class="d-inline-block float-left m-1">
								<img src={{followedStream.channelLogo}} class="rounded" height="42" width="42">
							</div>
							<div class="d-flex-fill m-1">
								<div class="d-inline-block">
									<p class="h6 m-0">{{followedStream.channelDisplayName}}</p>
									<small>{{followedStream.game}}</small>
								</div>
								<div class="d-inline-block float-right m-2">
									<span class="badge badge-twitch badge-pill">{{followedStream.viewers}}</span>
								</div>
							</div>
						</li>
					</ul>
				</div>
				<div class="tab-pane show" [class.active]="showChatTab" id="list-twitch-chat" role="tabpanel"
					aria-labelledby="list-twitch-chat-list">
					<div id="twitch-chat-panel" class="overflow-auto twitch-panel-width text-secondary">
						<div *ngFor="let msg of chatMsgs">
							<p class="m-0" [ngStyle]="{'color': msg.color}">{{msg.username}}: <small class="text-light" [innerHTML]="msg.msg"></small></p>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div [hidden]="isPanelLoaded" class="text-center p-5">
		<div class="spinner-border text-light" role="status">
			<span class="sr-only">Loading...</span>
		</div>
	</div>
</div>

<div id="twitchChatVideoOverlay" class="overflow-hidden position-absolute">
	<div>
		<p *ngFor="let msg of chatMsgs" class="m-0" [ngStyle]="{'color': msg.color}">{{msg.username}}: <small class="text-light" [innerHTML]="msg.msg"></small></p>
	</div>
</div>